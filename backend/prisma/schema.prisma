datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model Usuario {
  idUsuario  Int      @id @default(autoincrement())
  nombre     String
  username   String   @unique
  correo     String   @unique
  contrasena String

  memesCreados       Meme[]           @relation("CreadorMeme")
  plantillasCreadas  Plantilla_meme[] @relation("CreadorPlantilla")
  reacciones         Reaccion[]
}

model Meme {
  idMeme      Int      @id @default(autoincrement())
  descripcion String?
  superior    String?
  inferior    String?
  estado      String?
  fecha       DateTime @default(now())
  imagen      String?  @db.Text

  idUsuario Int
  creador   Usuario @relation("CreadorMeme", fields: [idUsuario], references: [idUsuario])

  idPlantilla Int?
  plantilla   Plantilla_meme? @relation(fields: [idPlantilla], references: [idPlantilla])

  reacciones Reaccion[]
}

model Plantilla_meme {
  idPlantilla Int      @id @default(autoincrement())
  nombre      String
  descripcion String?
  imagen      String   @db.Text
  fecha       DateTime @default(now())

  idUsuario Int
  creador   Usuario @relation("CreadorPlantilla", fields: [idUsuario], references: [idUsuario])

  memes Meme[]
}

model Reaccion {
  idReaccion Int      @id @default(autoincrement())
  tipo       String
  fecha      DateTime @default(now())

  idUsuario Int
  usuario   Usuario @relation(fields: [idUsuario], references: [idUsuario])

  idMeme Int
  meme   Meme @relation(fields: [idMeme], references: [idMeme])
}
